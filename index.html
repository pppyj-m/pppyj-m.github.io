<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-smart-home-skill" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/07/smart-home-skill/" class="article-date">
  <time class="dt-published" datetime="2021-04-07T06:04:21.000Z" itemprop="datePublished">2021-04-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/07/smart-home-skill/">AWS Smart Home Skill介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Alexa的smart-home-skill介绍"><a href="#Alexa的smart-home-skill介绍" class="headerlink" title="Alexa的smart home skill介绍"></a>Alexa的smart home skill介绍</h2><h3 id="一、用户绑定设备"><a href="#一、用户绑定设备" class="headerlink" title="一、用户绑定设备"></a>一、用户绑定设备</h3><h5 id="以下这个流程图，描述了一种如何将物理设备绑定到用户的方法"><a href="#以下这个流程图，描述了一种如何将物理设备绑定到用户的方法" class="headerlink" title="以下这个流程图，描述了一种如何将物理设备绑定到用户的方法:"></a>以下这个流程图，描述了一种如何将物理设备绑定到用户的方法:</h5><p><img src="https://alexaworkshop.com/images/smart-home/device-bind-flow.png" alt="img"></p>
<p>整个流程梳理如下：</p>
<ol>
<li>客户通过手机扫描二维码</li>
<li>手机上打开二维码所指向的网站</li>
<li>重定向到登陆页面 (如果之前登陆过，直接进入第六步)</li>
<li>提交登陆信息来换取 <strong>accessToken</strong> 和 <strong>idToken</strong></li>
<li>用 <strong>accessToken</strong> 来换取用户信息</li>
<li>调用设备绑定API</li>
<li>在数据库中创建用户和设备的绑定关系</li>
</ol>
<h3 id="二、Account-Linking（上一章的细化）"><a href="#二、Account-Linking（上一章的细化）" class="headerlink" title="二、Account Linking（上一章的细化）"></a>二、Account Linking（上一章的细化）</h3><h5 id="以下是一段摘录自Alexa-Docs-的关于-Account-Linking-的解释。"><a href="#以下是一段摘录自Alexa-Docs-的关于-Account-Linking-的解释。" class="headerlink" title="以下是一段摘录自Alexa Docs 的关于 Account Linking 的解释。"></a>以下是一段摘录自<a target="_blank" rel="noopener" href="https://developer.amazon.com/docs/account-linking/understand-account-linking.html#account-linking-and-the-skill-model">Alexa Docs</a> 的关于 Account Linking 的解释。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You would use account linking if your skill needs personalized data from another system. For example, suppose you own a web-based service “Car Fu” that lets users order taxis. A custom skill that lets users access “Car Fu” by voice would be very useful. For example, “Alexa, ask “Car Fu” to order a taxi.” Completing this request requires the skill to access your “Car Fu” service as a specific “Car Fu” user for profile and payment information. Therefore, you need a link between the Amazon account used with the Alexa device and the “Car Fu” account for the user.</span><br></pre></td></tr></table></figure>

<h5 id="在-Alexa-Skills-Kit-中，Account-Linking-遵循-OAuth-2-0-下图展示了如何获取-AccessToken-的流程"><a href="#在-Alexa-Skills-Kit-中，Account-Linking-遵循-OAuth-2-0-下图展示了如何获取-AccessToken-的流程" class="headerlink" title="在 Alexa Skills Kit 中，Account Linking 遵循 OAuth 2.0. 下图展示了如何获取 AccessToken 的流程."></a>在 Alexa Skills Kit 中，Account Linking 遵循 <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a>. 下图展示了如何获取 <strong>AccessToken</strong> 的流程.</h5><p><img src="https://alexaworkshop.com/images/smart-home/auth-code-flow.png" alt="img"></p>
<h5 id="Alexa-会在接下来所有的指令中，都附加上-AccessToken-在-Alexa-后端-Lambda-中，程序需要解码并验证-AccessToken-来获得-用户有关的信息。"><a href="#Alexa-会在接下来所有的指令中，都附加上-AccessToken-在-Alexa-后端-Lambda-中，程序需要解码并验证-AccessToken-来获得-用户有关的信息。" class="headerlink" title="Alexa 会在接下来所有的指令中，都附加上 AccessToken. 在 Alexa 后端 Lambda 中，程序需要解码并验证 AccessToken 来获得 用户有关的信息。"></a>Alexa 会在接下来所有的指令中，都附加上 <strong>AccessToken</strong>. 在 Alexa 后端 Lambda 中，程序需要解码并验证 <strong>AccessToken</strong> 来获得 用户有关的信息。</h5><p><img src="https://alexaworkshop.com/images/smart-home/skill-interaction-flow.png" alt="img"></p>
<h3 id="三、OAuth-2-0简介"><a href="#三、OAuth-2-0简介" class="headerlink" title="三、OAuth 2.0简介"></a>三、OAuth 2.0简介</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><h5 id="简单说，OAuth-就是一种授权机制。数据的所有者告诉系统，同意授权第三方（Alexa）应用进入系统（我们的cloud-server），获取这些数据。系统从而产生一个短期的进入令牌（token），用来代替密码，供第三方应用使用。"><a href="#简单说，OAuth-就是一种授权机制。数据的所有者告诉系统，同意授权第三方（Alexa）应用进入系统（我们的cloud-server），获取这些数据。系统从而产生一个短期的进入令牌（token），用来代替密码，供第三方应用使用。" class="headerlink" title="简单说，OAuth 就是一种授权机制。数据的所有者告诉系统，同意授权第三方（Alexa）应用进入系统（我们的cloud server），获取这些数据。系统从而产生一个短期的进入令牌（token），用来代替密码，供第三方应用使用。"></a><strong>简单说，OAuth 就是一种授权机制。数据的所有者告诉系统，同意授权第三方（Alexa）应用进入系统（我们的cloud server），获取这些数据。系统从而产生一个短期的进入令牌（token），用来代替密码，供第三方应用使用。</strong></h5><h4 id="授权方式—-授权码方式"><a href="#授权方式—-授权码方式" class="headerlink" title="授权方式—-授权码方式"></a>授权方式—-授权码方式</h4><h5 id="授权码（authorization-code）方式，指的是第三方应用先申请一个授权码，然后再用该码获取令牌。"><a href="#授权码（authorization-code）方式，指的是第三方应用先申请一个授权码，然后再用该码获取令牌。" class="headerlink" title="授权码（authorization code）方式，指的是第三方应用先申请一个授权码，然后再用该码获取令牌。"></a><strong>授权码（authorization code）方式，指的是第三方应用先申请一个授权码，然后再用该码获取令牌。</strong></h5><h5 id="第一步，A-网站提供一个链接，用户点击后就会跳转到-B-网站，授权用户数据给-A-网站使用。下面就是-A-网站跳转-B-网站的一个示意链接。"><a href="#第一步，A-网站提供一个链接，用户点击后就会跳转到-B-网站，授权用户数据给-A-网站使用。下面就是-A-网站跳转-B-网站的一个示意链接。" class="headerlink" title="第一步，A 网站提供一个链接，用户点击后就会跳转到 B 网站，授权用户数据给 A 网站使用。下面就是 A 网站跳转 B 网站的一个示意链接。"></a>第一步，A 网站提供一个链接，用户点击后就会跳转到 B 网站，授权用户数据给 A 网站使用。下面就是 A 网站跳转 B 网站的一个示意链接。</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//b.com/oauth/authorize?</span></span><br><span class="line">  response_type=code&amp;</span><br><span class="line">  client_id=CLIENT_ID&amp;</span><br><span class="line">  redirect_uri=CALLBACK_URL&amp;</span><br><span class="line">  scope=read</span><br></pre></td></tr></table></figure>

<h5 id="上面-URL-中，response-type参数表示要求返回授权码（code），client-id参数让-B-知道是谁在请求，redirect-uri参数是-B-接受或拒绝请求后的跳转网址，scope参数表示要求的授权范围（这里是只读）。"><a href="#上面-URL-中，response-type参数表示要求返回授权码（code），client-id参数让-B-知道是谁在请求，redirect-uri参数是-B-接受或拒绝请求后的跳转网址，scope参数表示要求的授权范围（这里是只读）。" class="headerlink" title="上面 URL 中，response_type参数表示要求返回授权码（code），client_id参数让 B 知道是谁在请求，redirect_uri参数是 B 接受或拒绝请求后的跳转网址，scope参数表示要求的授权范围（这里是只读）。"></a>上面 URL 中，<code>response_type</code>参数表示要求返回授权码（<code>code</code>），<code>client_id</code>参数让 B 知道是谁在请求，<code>redirect_uri</code>参数是 B 接受或拒绝请求后的跳转网址，<code>scope</code>参数表示要求的授权范围（这里是只读）。</h5><h5 id="第二步，用户跳转后，B-网站会要求用户登录，然后询问是否同意给予-A-网站授权。用户表示同意，这时-B-网站就会跳回redirect-uri参数指定的网址。跳转时，会传回一个授权码，就像下面这样。"><a href="#第二步，用户跳转后，B-网站会要求用户登录，然后询问是否同意给予-A-网站授权。用户表示同意，这时-B-网站就会跳回redirect-uri参数指定的网址。跳转时，会传回一个授权码，就像下面这样。" class="headerlink" title="第二步，用户跳转后，B 网站会要求用户登录，然后询问是否同意给予 A 网站授权。用户表示同意，这时 B 网站就会跳回redirect_uri参数指定的网址。跳转时，会传回一个授权码，就像下面这样。"></a>第二步，用户跳转后，B 网站会要求用户登录，然后询问是否同意给予 A 网站授权。用户表示同意，这时 B 网站就会跳回<code>redirect_uri</code>参数指定的网址。跳转时，会传回一个授权码，就像下面这样。</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//a.com/callback?code=AUTHORIZATION_CODE</span></span><br></pre></td></tr></table></figure>

<h5 id="第三步，A-网站拿到授权码以后，就可以在后端，向-B-网站请求令牌。"><a href="#第三步，A-网站拿到授权码以后，就可以在后端，向-B-网站请求令牌。" class="headerlink" title="第三步，A 网站拿到授权码以后，就可以在后端，向 B 网站请求令牌。"></a>第三步，A 网站拿到授权码以后，就可以在后端，向 B 网站请求令牌。</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//b.com/oauth/token?</span></span><br><span class="line"> client_id=CLIENT_ID&amp;</span><br><span class="line"> client_secret=CLIENT_SECRET&amp;</span><br><span class="line"> grant_type=authorization_code&amp;</span><br><span class="line"> code=AUTHORIZATION_CODE&amp;</span><br><span class="line"> redirect_uri=CALLBACK_URL</span><br></pre></td></tr></table></figure>

<h5 id="上面-URL-中，client-id参数和client-secret参数用来让-B-确认-A-的身份（client-secret参数是保密的，因此只能在后端发请求），grant-type参数的值是AUTHORIZATION-CODE，表示采用的授权方式是授权码，code参数是上一步拿到的授权码，redirect-uri参数是令牌颁发后的回调网址。"><a href="#上面-URL-中，client-id参数和client-secret参数用来让-B-确认-A-的身份（client-secret参数是保密的，因此只能在后端发请求），grant-type参数的值是AUTHORIZATION-CODE，表示采用的授权方式是授权码，code参数是上一步拿到的授权码，redirect-uri参数是令牌颁发后的回调网址。" class="headerlink" title="上面 URL 中，client_id参数和client_secret参数用来让 B 确认 A 的身份（client_secret参数是保密的，因此只能在后端发请求），grant_type参数的值是AUTHORIZATION_CODE，表示采用的授权方式是授权码，code参数是上一步拿到的授权码，redirect_uri参数是令牌颁发后的回调网址。"></a>上面 URL 中，<code>client_id</code>参数和<code>client_secret</code>参数用来让 B 确认 A 的身份（<code>client_secret</code>参数是保密的，因此只能在后端发请求），<code>grant_type</code>参数的值是<code>AUTHORIZATION_CODE</code>，表示采用的授权方式是授权码，<code>code</code>参数是上一步拿到的授权码，<code>redirect_uri</code>参数是令牌颁发后的回调网址。</h5><h5 id="第四步，B-网站收到请求以后，就会颁发令牌。具体做法是向redirect-uri指定的网址，发送一段-JSON-数据。"><a href="#第四步，B-网站收到请求以后，就会颁发令牌。具体做法是向redirect-uri指定的网址，发送一段-JSON-数据。" class="headerlink" title="第四步，B 网站收到请求以后，就会颁发令牌。具体做法是向redirect_uri指定的网址，发送一段 JSON 数据。"></a>第四步，B 网站收到请求以后，就会颁发令牌。具体做法是向<code>redirect_uri</code>指定的网址，发送一段 JSON 数据。</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;    </span><br><span class="line">  <span class="string">&quot;access_token&quot;</span>:<span class="string">&quot;ACCESS_TOKEN&quot;</span>,</span><br><span class="line">  <span class="string">&quot;token_type&quot;</span>:<span class="string">&quot;bearer&quot;</span>,</span><br><span class="line">  <span class="string">&quot;expires_in&quot;</span>:<span class="number">2592000</span>,</span><br><span class="line">  <span class="string">&quot;refresh_token&quot;</span>:<span class="string">&quot;REFRESH_TOKEN&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scope&quot;</span>:<span class="string">&quot;read&quot;</span>,</span><br><span class="line">  <span class="string">&quot;uid&quot;</span>:<span class="number">100101</span>,</span><br><span class="line">  <span class="string">&quot;info&quot;</span>:&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="上面-JSON-数据中，access-token字段就是令牌，A-网站在后端拿到了。"><a href="#上面-JSON-数据中，access-token字段就是令牌，A-网站在后端拿到了。" class="headerlink" title="上面 JSON 数据中，access_token字段就是令牌，A 网站在后端拿到了。"></a>上面 JSON 数据中，<code>access_token</code>字段就是令牌，A 网站在后端拿到了。</h5><p><img src="https://www.wangbase.com/blogimg/asset/201904/bg2019040905.jpg" alt="img"></p>
<h4 id="更新令牌"><a href="#更新令牌" class="headerlink" title="更新令牌"></a>更新令牌</h4><h5 id="令牌的有效期到了，如果让用户重新走一遍上面的流程，再申请一个新的令牌，很可能体验不好，而且也没有必要。OAuth-2-0-允许用户自动更新令牌。"><a href="#令牌的有效期到了，如果让用户重新走一遍上面的流程，再申请一个新的令牌，很可能体验不好，而且也没有必要。OAuth-2-0-允许用户自动更新令牌。" class="headerlink" title="令牌的有效期到了，如果让用户重新走一遍上面的流程，再申请一个新的令牌，很可能体验不好，而且也没有必要。OAuth 2.0 允许用户自动更新令牌。"></a>令牌的有效期到了，如果让用户重新走一遍上面的流程，再申请一个新的令牌，很可能体验不好，而且也没有必要。OAuth 2.0 允许用户自动更新令牌。</h5><h5 id="具体方法是，B-网站颁发令牌的时候，一次性颁发两个令牌，一个用于获取数据，另一个用于获取新的令牌（refresh-token-字段）。令牌到期前，用户使用-refresh-token-发一个请求，去更新令牌。"><a href="#具体方法是，B-网站颁发令牌的时候，一次性颁发两个令牌，一个用于获取数据，另一个用于获取新的令牌（refresh-token-字段）。令牌到期前，用户使用-refresh-token-发一个请求，去更新令牌。" class="headerlink" title="具体方法是，B 网站颁发令牌的时候，一次性颁发两个令牌，一个用于获取数据，另一个用于获取新的令牌（refresh token 字段）。令牌到期前，用户使用 refresh token 发一个请求，去更新令牌。"></a>具体方法是，B 网站颁发令牌的时候，一次性颁发两个令牌，一个用于获取数据，另一个用于获取新的令牌（refresh token 字段）。令牌到期前，用户使用 refresh token 发一个请求，去更新令牌。</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//b.com/oauth/token?</span></span><br><span class="line">  grant_type=refresh_token&amp;</span><br><span class="line">  client_id=CLIENT_ID&amp;</span><br><span class="line">  client_secret=CLIENT_SECRET&amp;</span><br><span class="line">  refresh_token=REFRESH_TOKEN</span><br></pre></td></tr></table></figure>

<h5 id="上面-URL-中，grant-type参数为refresh-token表示要求更新令牌，client-id参数和client-secret参数用于确认身份，refresh-token参数就是用于更新令牌的令牌。"><a href="#上面-URL-中，grant-type参数为refresh-token表示要求更新令牌，client-id参数和client-secret参数用于确认身份，refresh-token参数就是用于更新令牌的令牌。" class="headerlink" title="上面 URL 中，grant_type参数为refresh_token表示要求更新令牌，client_id参数和client_secret参数用于确认身份，refresh_token参数就是用于更新令牌的令牌。"></a>上面 URL 中，<code>grant_type</code>参数为<code>refresh_token</code>表示要求更新令牌，<code>client_id</code>参数和<code>client_secret</code>参数用于确认身份，<code>refresh_token</code>参数就是用于更新令牌的令牌。</h5><h5 id="B-网站验证通过以后，就会颁发新的令牌。"><a href="#B-网站验证通过以后，就会颁发新的令牌。" class="headerlink" title="B 网站验证通过以后，就会颁发新的令牌。"></a>B 网站验证通过以后，就会颁发新的令牌。</h5><h4 id="Github-OAuth-第三方登录示例教程"><a href="#Github-OAuth-第三方登录示例教程" class="headerlink" title="Github OAuth 第三方登录示例教程"></a><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2019/04/github-oauth.html">Github OAuth 第三方登录示例教程</a></h4><h3 id="四、Alexa发现并控制设备简单流程"><a href="#四、Alexa发现并控制设备简单流程" class="headerlink" title="四、Alexa发现并控制设备简单流程"></a><a target="_blank" rel="noopener" href="https://time.geekbang.org/article/7172">四、Alexa发现并控制设备简单流程</a></h3><h5 id="首先，用户在Alexa-App上面启用Smart-Home-Skill，并与一个设备云账号关联，发现与这个账号关联的设备。"><a href="#首先，用户在Alexa-App上面启用Smart-Home-Skill，并与一个设备云账号关联，发现与这个账号关联的设备。" class="headerlink" title="首先，用户在Alexa App上面启用Smart Home Skill，并与一个设备云账号关联，发现与这个账号关联的设备。"></a>首先，用户在Alexa App上面启用Smart Home Skill，并与一个设备云账号关联，发现与这个账号关联的设备。</h5><h5 id="然后当Alexa听到用户说，“Alexa，帮我把厨房灯调亮50-”，或者用户在Alexa-App上改变灯的亮度，Alexa理解用户的意图后改变指定的设备的状态。Alexa把收到的这些消息生成一个请求指令，这条指令包括用户授权信息、设备唯一标识和新的设置数据。然后把请求指令发送给AWS-Lambda中部署的控制这盏灯的Skill，在Skill中解析指令，发送给与灯相关的设备云。Skill再回复Alexa一条叫做event的消息告诉请求是否成功，Alexa利用event中的信息回复用户。"><a href="#然后当Alexa听到用户说，“Alexa，帮我把厨房灯调亮50-”，或者用户在Alexa-App上改变灯的亮度，Alexa理解用户的意图后改变指定的设备的状态。Alexa把收到的这些消息生成一个请求指令，这条指令包括用户授权信息、设备唯一标识和新的设置数据。然后把请求指令发送给AWS-Lambda中部署的控制这盏灯的Skill，在Skill中解析指令，发送给与灯相关的设备云。Skill再回复Alexa一条叫做event的消息告诉请求是否成功，Alexa利用event中的信息回复用户。" class="headerlink" title="然后当Alexa听到用户说，“Alexa，帮我把厨房灯调亮50%”，或者用户在Alexa App上改变灯的亮度，Alexa理解用户的意图后改变指定的设备的状态。Alexa把收到的这些消息生成一个请求指令，这条指令包括用户授权信息、设备唯一标识和新的设置数据。然后把请求指令发送给AWS Lambda中部署的控制这盏灯的Skill，在Skill中解析指令，发送给与灯相关的设备云。Skill再回复Alexa一条叫做event的消息告诉请求是否成功，Alexa利用event中的信息回复用户。"></a>然后当Alexa听到用户说，“Alexa，帮我把厨房灯调亮50%”，或者用户在Alexa App上改变灯的亮度，Alexa理解用户的意图后改变指定的设备的状态。Alexa把收到的这些消息生成一个请求指令，这条指令包括用户授权信息、设备唯一标识和新的设置数据。然后把请求指令发送给AWS Lambda中部署的控制这盏灯的Skill，在Skill中解析指令，发送给与灯相关的设备云。Skill再回复Alexa一条叫做event的消息告诉请求是否成功，Alexa利用event中的信息回复用户。</h5><h5 id="除此之外，为了支持语音请求，当设备状态变化时，API允许我们很方便地提供更新，这意味着用户在Alexa-App上可以实时看到并控制设备状态。"><a href="#除此之外，为了支持语音请求，当设备状态变化时，API允许我们很方便地提供更新，这意味着用户在Alexa-App上可以实时看到并控制设备状态。" class="headerlink" title="除此之外，为了支持语音请求，当设备状态变化时，API允许我们很方便地提供更新，这意味着用户在Alexa App上可以实时看到并控制设备状态。"></a>除此之外，为了支持语音请求，当设备状态变化时，API允许我们很方便地提供更新，这意味着用户在Alexa App上可以实时看到并控制设备状态。</h5><p><img src="https://static001.geekbang.org/resource/image/cb/91/cb04e103cbea10fa8d1a84e9ca265d91.png" alt="img"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/07/smart-home-skill/" data-id="ckn71rea0000390doelynhcqt" data-title="AWS Smart Home Skill介绍" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-注释" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/23/%E6%B3%A8%E9%87%8A/" class="article-date">
  <time class="dt-published" datetime="2021-02-23T09:41:45.000Z" itemprop="datePublished">2021-02-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/23/%E6%B3%A8%E9%87%8A/">注释</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Update-a-publication"><a href="#Update-a-publication" class="headerlink" title="Update a publication"></a>Update a publication</h2><p>After publishing, StackEdit keeps your file linked to that publication which makes it easy for you to re-publish it. Once you have modified your file and you want to update your publication, click on the <strong>Publish now</strong> button in the navigation bar.</p>
<blockquote>
<p><strong>Note:</strong> The <strong>Publish now</strong> button is disabled if your file has not been published yet.</p>
</blockquote>
<h2 id="Manage-file-publication"><a href="#Manage-file-publication" class="headerlink" title="Manage file publication"></a>Manage file publication</h2><p>Since one file can be published to multiple locations, you can list and manage publish locations by clicking <strong>File publication</strong> in the <strong>Publish</strong> sub-menu. This allows you to list and remove publication locations that are linked to your file.</p>
<h1 id="Markdown-extensions"><a href="#Markdown-extensions" class="headerlink" title="Markdown extensions"></a>Markdown extensions</h1><p>StackEdit extends the standard Markdown syntax by adding extra <strong>Markdown extensions</strong>, providing you with some nice features.</p>
<blockquote>
<p><strong>ProTip:</strong> You can disable any <strong>Markdown extension</strong> in the <strong>File properties</strong> dialog.</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/23/%E6%B3%A8%E9%87%8A/" data-id="ckn71rea2000590do0hms3e1q" data-title="注释" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-shell脚本学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/23/shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2021-02-23T07:44:21.000Z" itemprop="datePublished">2021-02-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/23/shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">shell脚本学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="第一章-‘hello-world-！’"><a href="#第一章-‘hello-world-！’" class="headerlink" title="第一章 ‘hello world ！’"></a>第一章 ‘hello world ！’</h2><ol>
<li>bash目录： ~/bin/bash</li>
<li>创建bash文件： 扩展名为.sh</li>
<li>最开头需要添加： #!/bin/bash</li>
<li>或者使用： /bin/bash xxx.sh  来执行</li>
<li>注意：首先要  ‘chmod +x ./test.sh’ #赋予执行权限 接着  ‘./test.sh’执行</li>
</ol>
<hr>
<h2 id="开始实战！"><a href="#开始实战！" class="headerlink" title="开始实战！"></a>开始实战！</h2><h2 id="第二章-sort-file-option"><a href="#第二章-sort-file-option" class="headerlink" title="第二章 sort[file] [option]"></a>第二章 sort[file] [option]</h2><p>sort命令可对‘文件内容’进行排序<br>常用的option为：<br>-r : 逆序输出<br>-t : 指定分隔符<br>-k : 排序的键，如 -k2 按第二位排序<br>-n : 按数值大小排序，不然的话可能 10 会比 2 更小，因为按照首字母比较<br>-u : 去重，功能同 uniq，但它是全文本去重</p>
<p>实用举例：1.全文去重<br>对于一个文本文件 #/usr/games/shell_practice/去重<br>aaa<br>bbbbb<br>ccccc<br>123<br>aaaaa<br>123<br>bbb<br>aaa</p>
<p>$sort <file> -u #这种会将文本进行进行排序之后去重等同于下面命令<br>$sort <file> |uniq #‘|’代表管道符号会将第一个命令后的结果给后面并执行<br>$awk   #课后题：使用awk进行去重？达到不破坏顺序的目的</p>
<ol start="2">
<li>部分去重</li>
</ol>
<hr>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a target="_blank" rel="noopener" href="https://windard.com/opinion/2017/04/18/Linux-Shell">https://windard.com/opinion/2017/04/18/Linux-Shell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-shell-process-control.html">https://www.runoob.com/linux/linux-shell-process-control.html</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion">https://github.com/acecilia/OpenWRTInvasion</a>  ##小米路由器刷机</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/23/shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="ckn71rea1000490do0r10fmyz" data-title="shell脚本学习笔记" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-README" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/22/README/" class="article-date">
  <time class="dt-published" datetime="2021-02-22T03:04:16.000Z" itemprop="datePublished">2021-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/22/README/">如何搭建博客</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Root-shell-exploit-for-several-Xiaomi-routers-4A-Gigabit-4A-100M-4C-3Gv2-4Q-miWifi-3C…"><a href="#Root-shell-exploit-for-several-Xiaomi-routers-4A-Gigabit-4A-100M-4C-3Gv2-4Q-miWifi-3C…" class="headerlink" title="Root shell exploit for several Xiaomi routers: 4A Gigabit, 4A 100M, 4C, 3Gv2, 4Q, miWifi 3C…"></a>Root shell exploit for several Xiaomi routers: 4A Gigabit, 4A 100M, 4C, 3Gv2, 4Q, miWifi 3C…</h1><h2 id="How-to-run"><a href="#How-to-run" class="headerlink" title="How to run"></a>How to run</h2><p><strong>NOTE: FROM VERSION <code>0.0.2</code> THE ROUTER NEEDS INTERNET ACCESS</strong>. If you require to run the exploit without internet access please try version <code>0.0.1</code>. Find the versions here: <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/releases">https://github.com/acecilia/OpenWRTInvasion/releases</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt # Install requirements</span><br><span class="line">python3 remote_command_execution_vulnerability.py # Run the script</span><br></pre></td></tr></table></figure>

<p>You will be asked for the router IP address and for the <code>stok</code>. You can grab the <code>stok</code> from the router URL after you log in to the admin interface:</p>
<p><img src="readme/readme-001.png"></p>
<p>After that, a telnet server will be up and running on the router. You can connect to it by running:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet &lt;router_ip_address&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>User: <code>root</code></li>
<li>Password: <code>root</code></li>
</ul>
<p>The script also starts an ftp server at port 21, so you can get access to the filesystem using a GUI (for example <a target="_blank" rel="noopener" href="https://cyberduck.io/">cyberduck</a>).</p>
<h2 id="Supported-routers-and-firmware-versions"><a href="#Supported-routers-and-firmware-versions" class="headerlink" title="Supported routers and firmware versions"></a>Supported routers and firmware versions</h2><ul>
<li>MiRouter 4A Gigabit: user <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/ksc91u">ksc91u</a> claims that this method also works on firmware version <code>2.28.62</code> and  <code>2.28.132</code>: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/359">OpenWrt forum</a>. It is also working on the latest <code>3.0.24</code> firmware: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-and-flashable-with-openwrtinvasion/36685/1135">OpenWrt forum</a>.</li>
<li>MiRouter 4A 100M (non gigabit): user <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/morhimi">morhimi</a> claims that this method works on firmware version <code>2.18.51</code>: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/372">OpenWrt forum</a>. User <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/jeffpeng">Jeffpeng</a> claims that this method works on firmware version <code>2.18.58</code>: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/373">OpenWrt forum</a>.</li>
<li>MiRouter 4C: user <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/jeffpeng">Jeffpeng</a> claims that this method works on firmware version <code>2.14.81</code>: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/support-for-xiaomi-mi-router-4c-r4cm/36418/31">OpenWrt forum</a>.</li>
<li>Mi Router 3Gv2: user <a href="massimiliano.mangoni@gmail.com">Massimiliano Mangoni</a> claims that this method also works on firmware version <code>2.28.8</code> (message posted in Slack).</li>
<li>Mi Router 4Q (aka R4C): user cadaverous claims that this method also works on firmware version <code>2.28.48</code> (message posted in Slack), but because the router is mips architecture (not mipsel), he needed to use version <code>0.0.1</code> of the script (the other versions use a busybox binary built for the mipsel architecture that is used to start a telnet sever).</li>
<li>MiWifi 3C: works on firmware versions <code>2.9.217</code>, <code>2.14.45</code> and <code>2.8.51_INT</code>: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/support-for-xiaomi-miwifi-3c/11643/23">OpenWrt forum</a>, <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/support-for-xiaomi-miwifi-3c/11643/17">OpenWrt forum</a>.</li>
<li><a target="_blank" rel="noopener" href="https://www.mi.com/miwifi4">Mi Router 4</a>: user <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/issues/21#issuecomment-748619870">Firef0x</a> claims that exploit version <code>0.0.1</code> works on firmware version <code>2.26.175</code>.</li>
<li>Xiaomi Mi R3P: user <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/issues/58">lukasz1992</a> claims that the exploit works with the Xiaomi Dev firmware.</li>
<li><a target="_blank" rel="noopener" href="https://openwrt.org/toh/hwdata/xiaomi/xiaomi_miwifi_3g">Xiaomi 3Gv1</a>: user <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/issues/68#issue-814768067">krumelmonster</a> claims that exploit works with the stock firmware coming with the router.</li>
</ul>
<h2 id="Not-supported"><a href="#Not-supported" class="headerlink" title="Not supported"></a>Not supported</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/issues/46">AC2350 AIOT</a></li>
</ul>
<h2 id="Xiaomi-4A-Gigabit-Global-Edition"><a href="#Xiaomi-4A-Gigabit-Global-Edition" class="headerlink" title="Xiaomi 4A Gigabit Global Edition"></a>Xiaomi 4A Gigabit Global Edition</h2><h3 id="Firmwares"><a href="#Firmwares" class="headerlink" title="Firmwares"></a>Firmwares</h3><p>This repository contains the following firmwares:</p>
<ul>
<li>Official Xiaomi - <code>2.28.62</code> - in Chinese. SHA256: <code>a3db7f937d279cf38c2a3bec09772d65</code><ul>
<li>URL in this repository: <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/raw/master/firmwares/stock/miwifi_r4a_firmware_72d65_2.28.62.bin">https://github.com/acecilia/OpenWRTInvasion/raw/master/firmwares/stock/miwifi_r4a_firmware_72d65_2.28.62.bin</a></li>
</ul>
</li>
<li>Official Xiaomi - <code>3.0.24</code> - in English. MD5: <code>9c4a60addaad76dc13b6df6b4ac03233</code><ul>
<li>URL in this repository: <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/raw/master/firmwares/stock/miwifi_r4a_all_03233_3.0.24_INT.bin">https://github.com/acecilia/OpenWRTInvasion/raw/master/firmwares/stock/miwifi_r4a_all_03233_3.0.24_INT.bin</a></li>
<li>URL in the official Xiaomi site: <a target="_blank" rel="noopener" href="http://cdn.awsde0-fusion.fds.api.mi-img.com/xiaoqiang/rom/r4a/miwifi_r4a_all_03233_3.0.24_INT.bin">http://cdn.awsde0-fusion.fds.api.mi-img.com/xiaoqiang/rom/r4a/miwifi_r4a_all_03233_3.0.24_INT.bin</a></li>
</ul>
</li>
</ul>
<p>If you have a pending update in your Xiaomi stock firmware, you can check its md5 hash and the download url by navigating to:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.31.1&#x2F;cgi-bin&#x2F;luci&#x2F;;stok&#x3D;&lt;stok&gt;&#x2F;api&#x2F;xqsystem&#x2F;check_rom_update</span><br></pre></td></tr></table></figure>

<h3 id="Install-OpenWrt"><a href="#Install-OpenWrt" class="headerlink" title="Install OpenWrt"></a>Install OpenWrt</h3><p>When installing OpenWrt on the Xiaomi 4A Gigabit, there are several options. <strong>Note that there isn’t a stable release for it yet, which means that the firmware may be unstable</strong>:</p>
<ul>
<li><p>One of the images listed in the <a target="_blank" rel="noopener" href="https://openwrt.org/inbox/toh/xiaomi/xiaomi_mi_router_4a_gigabit_edition">official OpenWrt wiki page</a></p>
</li>
<li><p>Build your own image with <code>imagebuilder</code>, using the latest source code on <code>master</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull openwrtorg&#x2F;imagebuilder:ramips-mt7621-master</span><br><span class="line">docker run --rm -v &quot;$(pwd)&quot;&#x2F;bin&#x2F;:&#x2F;home&#x2F;build&#x2F;openwrt&#x2F;bin -it openwrtorg&#x2F;imagebuilder:ramips-mt7621-master</span><br><span class="line">make PROFILE&#x3D;xiaomi_mir3g-v2 image</span><br></pre></td></tr></table></figure>
</li>
<li><p>Wait until there is a stable release of OpenWrt</p>
</li>
</ul>
<p>If <strong>after reading above text</strong> you still want to proceed, after login to the router through telnet run the following commands:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">curl https://raw.githubusercontent.com/acecilia/OpenWRTInvasion/master/firmwares/OpenWrt/06-06-2020/openwrt-ramips-mt7621-xiaomi_mir3g-v2-squashfs-sysupgrade.bin --output firmware.bin # Put here the URL you want to use to download the firmware</span><br><span class="line">./busybox sha256sum firmware.bin # Verify the firmware checksum before flashing, very important to avoid bricking your device!</span><br><span class="line">mtd -e OS1 -r write firmware.bin OS1 # Install OpenWrt</span><br></pre></td></tr></table></figure>

<p>This will install the snapshot version of OpenWrt (without Luci). You can now use ssh to connect to the router (and install Luci if you prefer it).</p>
<h3 id="Performance"><a href="#Performance" class="headerlink" title="Performance:"></a>Performance:</h3><p>Some users have reported worse WIFI performance in OpenWrt than in the stock firmware. See the following links:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/430">OpenWrt forum</a></li>
<li><a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/431">OpenWrt forum</a></li>
<li><a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/451">OpenWrt forum</a></li>
</ul>
<h2 id="For-more-info-and-support-go-to"><a href="#For-more-info-and-support-go-to" class="headerlink" title="For more info and support go to:"></a>For more info and support go to:</h2><ul>
<li><a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685">OpenWrt forum thread</a></li>
</ul>
<h2 id="If-you-brick-your-device"><a href="#If-you-brick-your-device" class="headerlink" title="If you brick your device"></a>If you brick your device</h2><p>You can find solutions in the following links:</p>
<ul>
<li>User <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/albertcp">albertcp</a> posted a very detailed guide: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/402">OpenWrt forum</a></li>
<li>User <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/micky0867">micky0867</a> has some more comments about the topic: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/391">OpenWrt forum</a></li>
<li>User <a target="_blank" rel="noopener" href="https://forum.openwrt.org/u/hoddy">hoddy</a> created a <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=VxzEvdDWU_s">video tutorial</a></li>
</ul>
<h2 id="Acknowledgments"><a href="#Acknowledgments" class="headerlink" title="Acknowledgments"></a>Acknowledgments</h2><ul>
<li>Original vulnerabilities and exploit: <a target="_blank" rel="noopener" href="https://github.com/UltramanGaia/Xiaomi_Mi_WiFi_R3G_Vulnerability_POC">UltramanGaia</a></li>
<li>Instructions to install OpenWrt after exploit execution: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/21">rogerpueyo</a></li>
<li>Testing and detailed install instructions: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-but-requires-overwriting-spi-flash-with-programmer/36685/349">hey07</a></li>
<li>Checking the URL of pending updates: <a target="_blank" rel="noopener" href="https://forum.openwrt.org/t/xiaomi-mi-router-4a-gigabit-edition-r4ag-r4a-gigabit-fully-supported-and-flashable-with-openwrtinvasion/36685/1114?u=acecilia">sicklesareterrible</a></li>
</ul>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><h3 id="Version-0-0-2-and-higher-telnet"><a href="#Version-0-0-2-and-higher-telnet" class="headerlink" title="Version 0.0.2 and higher: telnet"></a>Version 0.0.2 and higher: telnet</h3><p><img src="readme/exploit-002.gif" alt="Alt Text"></p>
<h3 id="Version-0-0-1-netcat-legacy"><a href="#Version-0-0-1-netcat-legacy" class="headerlink" title="Version 0.0.1: netcat (legacy)"></a>Version 0.0.1: netcat (legacy)</h3><p><img src="readme/exploit-001.gif" alt="Alt Text"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/22/README/" data-id="ckn71re9s000090do3fmifgc8" data-title="如何搭建博客" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-如何搭建博客" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/22/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time class="dt-published" datetime="2021-02-22T03:04:16.000Z" itemprop="datePublished">2021-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/22/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">如何搭建博客</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h2><p>内容</p>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/22/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" data-id="ckn71rea9000890do918w8a72" data-title="如何搭建博客" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/22/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-02-22T02:55:36.762Z" itemprop="datePublished">2021-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/22/hello-world/" data-id="ckn71re9x000190do1d25eke3" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/study/" style="font-size: 10px;">study</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/07/smart-home-skill/">AWS Smart Home Skill介绍</a>
          </li>
        
          <li>
            <a href="/2021/02/23/%E6%B3%A8%E9%87%8A/">注释</a>
          </li>
        
          <li>
            <a href="/2021/02/23/shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">shell脚本学习笔记</a>
          </li>
        
          <li>
            <a href="/2021/02/22/README/">如何搭建博客</a>
          </li>
        
          <li>
            <a href="/2021/02/22/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">如何搭建博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>